<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency Exchange</title>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            //run this only form is submitted
            document.querySelector('form').onsubmit = function () {

                fetch('https://api.exchangeratesapi.io/latest?base=USD')
            // .then(response => {return response.json()})
            .then(response => response.json()) //promise
            .then(data => {
                console.log(data)

                const currency = document.querySelector('#currency').value.toUpperCase()

                // if I had access to the API, it would be in this form
                // var rate = data.rates[currency]

                var rate = data.error.type 

                // and if we dont have that rate in the APi, we need to get 'undefined'
                if( rate !== undefined) {
                    document.querySelector('#result').innerHTML = `we are not able to get access key that is why i get ${rate}
                and this is fake rate ${art_rate.toFixed(3)} ${currency}` 
                } else {
                    document.querySelector('#result').innerHTML = 'Invalid Currency.'
                }


                var rate = data.error.type 
                const art_rate = 0.993523525
                document.querySelector('body').innerHTML = `we are not able to get access key that is why i get ${rate}
                and this is fake rate ${art_rate.toFixed(3)}`   
            })

                return false  //I dont want to submit to the another page, I m running it locally
            }

            // fetch('https://api.exchangeratesapi.io/latest?base=USD')
            // // .then(response => {return response.json()})
            // .then(response => response.json()) //promise
            // .then(data => {
            //     console.log(data)
            //     const rate = data.error.type 
            //     const art_rate = 0.993523525
            //     document.querySelector('body').innerHTML = `we are not able to get access key that is why i get ${rate}
            //     and this is fake rate ${art_rate.toFixed(3)}`   
            // })
        

        })
    </script>
</head>
<body>
 <form>
    <input id = 'currency' placeholder="Amount" type = "text">
    <input type = 'submit' value = "convert">
 </form>
 
 <div id = 'result'>

 </div>
</body>
</html>